<model-viewer id="mv"
  src="Sample.glb"
  ios-src="Sample.usdz"
  ar ar-modes="webxr scene-viewer quick-look"
  camera-controls
  autoplay
  /* animation-loop は付けない（1回だけ再生にする想定） */
  >
</model-viewer>
<script>
  const mv = document.querySelector('#mv');

  // 1) モデル読み込み時に1回だけ再生
  mv.addEventListener('load', () => {
    // 明示的にクリップ名を指定したい場合は animationName をセット
    // mv.animationName = 'AllCharacters';  // 例
    mv.play({repetitions: 1});
  });

  // 2) ARセッション開始時にも明示的に再生（WebXRで有効）
  mv.addEventListener('ar-status', (e) => {
    if (e.detail.status === 'session-started') {
      mv.play({repetitions: 1});
    }
  });

  // 3) 念のため AR配置直後に止まる機種対策（短遅延で再度play）
  mv.addEventListener('ar-status', (e) => {
    if (e.detail.status === 'session-started') {
      setTimeout(() => mv.play({repetitions: 1}), 300);
    }
  });
</script>
